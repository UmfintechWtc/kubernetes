[program:kubelet]
process_name = %(program_name)s
command={{ k8s_node_bin_path }}/kubelet
  --logtostderr=false
  --bootstrap-kubeconfig={{ k8s_node_cfg_path }}/kubelet-bootstrap.conf
  --cert-dir={{ k8s_node_ssl_path }}
  --config={{ k8s_node_cfg_path }}/kubelet.yaml
  --container-runtime=docker
  --cgroup-driver=cgroupfs
  --network-plugin=cni
  --cni-bin-dir={{ app.home }}/cni/bin
  --cni-conf-dir={{ app.home }}/cni/cfg/net.d
  --hostname-override={{ ansible_host }}
  --kubeconfig={{ k8s_node_cfg_path }}/kubelet.kubeconfig
  --pod-infra-container-image={{ DockerRegistry }}/base/{{ pause_repository.split("/")[1] }}
  --alsologtostderr=true
  --v=2
directory={{ k8s_node_path }}
user= {{ app.user }}
startsecs=3
autostart = true
autorestart = true
stopwaitsecs = 360
stopsignal = KILL
stopasgroup = true
stdout_logfile = {{ k8s_node_logs_path }}/kubelet/%(program_name)s-stdout.log
stdout_logfile_maxbytes=100MB
stdout_logfile_backups=5
stderr_logfile = {{ k8s_node_logs_path }}/kubelet/%(program_name)s-stderr.log
stderr_logfile_maxbytes=100MB
stderr_logfile_backups=5